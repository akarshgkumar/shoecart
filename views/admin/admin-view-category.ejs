<%- include('partials/header') %>
<%- include('partials/aside-nav') %>
<main class="main-wrap">
  <%- include('partials/admin-header') %>
  <section class="content-main">
    <div class="content-header">
      <div>
        <h2 class="content-title card-title">Category </h2>
        <p>Category management</p>
      </div>
      <div>
        <a href="/admin/add-category" class="btn btn-primary"><i class="text-muted material-icons md-post_add"></i>Add New Category</a>
      </div>
    </div>
    <div class="card mb-4">
      <header class="card-header">
        <div class="row gx-3">
          <div class="col-lg-4 mb-lg-0 mb-15 me-auto">
            <form action="/admin/search-category" method="get">
              <input type="text" name="q" placeholder="Search..." class="form-control">
            </form>
          </div>
        </div>
      </header>
      <div class="card-body">
        <% category.filter(category => !category.isDeleted).forEach(category => { %>
          <article class="itemlist">
            <div class="row align-items-center">
              <div class="col col-check flex-grow-0">
              </div>
              <div class="col-lg-4 col-sm-4 col-8 flex-grow-1 col-name">
                <a class="itemside" href="#">
                  <div class="info">
                    <h6 class="mb-0 capitalize">
                      <%= category.name %>
                    </h6>
                  </div>
                </a>
              </div>
              <div class="col-lg-2 col-sm-2 col-4 col-price"> <span>37 items</span> </div>
              <div class="col-lg-2 col-sm-2 col-4 col-status">
              </div>
              <div class="col-lg-1 col-sm-2 col-4 col-date">
                <% let date=new Date(category.createdAt); let day=("0" + date.getDate()).slice(-2); let month=("0" + (date.getMonth() + 1)).slice(-2); let year=date.getFullYear(); %>
                <span>
                  <%= `${day}.${month}.${year}` %>
                </span>
              </div>
              <div class="col-lg-2 col-sm-2 col-4 col-action text-end">
                <a href="/admin/edit-category/<%= category._id %>" class="btn btn-sm font-sm rounded btn-brand">
                  <i class="material-icons md-edit"></i> Edit
                </a>
                <a href="/admin/delete-category/<%= category._id %>" class="btn btn-sm font-sm btn-light rounded">
                  <i class="material-icons md-delete_forever"></i> Delete
                </a>
              </div>
            </div>
          </article>
        <% }) %>
      </div>
    </div>
    <!--pagination-->
    <div class="pagination-area mt-15 mb-sm-5 mb-lg-0">
      <nav aria-label="Page navigation example">
        <ul class="pagination justify-content-start">
          <% for (let i=1; i <=pages; i++) { %>
            <li class="page-item <%= current == i ? 'active' : '' %>"><a class="page-link"
                href="/admin/view-category?page=<%= i %>">
                <%= i %>
              </a></li>
            <% } %>
              <% if(current < pages) { %>
                <li class="page-item"><a class="page-link"
                    href="/admin/view-category?page=<%= current + 1 %>"><i
                      class="fi-rs-angle-double-small-right"></i></a></li>
                <% } %>
        </ul>
      </nav>
    </div>
  </section>
</main>
</body>
</html>